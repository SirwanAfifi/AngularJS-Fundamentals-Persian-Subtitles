1
00:00:02,000 --> 00:00:07,000
‫در این بخش می‌خواهیم به تعامل با صفحهٔ تست‌های
‫end-to-end نگاهی بیندازیم.

2
00:00:07,000 --> 00:00:12,000
‫یکی از کارهای که در صفحه Details page می‌توانیم انجام دهیم تغییر
‫فیلتر سطح جلسات است.

3
00:00:12,000 --> 00:00:21,000
‫اگر Introductory را انتخاب کنم، دو جلسه نمایش داده می‌شود. بنابراین، اجازه دهید
‫یک تست برای آن بنویسیم.

4
00:00:21,000 --> 00:00:28,000
‫اکنون، برای تغییر مقدار آن dropdown، ابتدا باید به HTML آن نگاهی بیندازم.

5
00:00:28,000 --> 00:00:33,000
‫خب با نگاهی به HTML در اینجا، می‌بینیم که dropdown این عنصر
‫select است.

6
00:00:33,000 --> 00:00:36,000
‫این عنصر به مدل query بایند شده است

7
00:00:36,000 --> 00:00:40,000
‫و مقداری که می‌خواهم برای آن قرار دهم introductory به صورت
‫حروف کوچک است.

8
00:00:40,000 --> 00:00:45,000
‫خب اجازه دهید به فایل تست برگردم و این select را بنویسم
‫که امکان انتخاب یک گزینه را به ما میدهد

9
00:00:45,000 --> 00:00:51,000
‫و پارامتری که می‌خواهم برای آن انتخاب کنم مقدار ng-model که
‫query است، می‌باشد

10
00:00:51,000 --> 00:00:56,000
‫سپس متد option را با مقداری که می‌خواهم انتخاب کنم، فراخوانی میکنم.

11
00:00:56,000 --> 00:00:58,000
‫این نحوه انتخاب یک گزینه از یک dropdown است.

12
00:00:58,000 --> 00:01:02,000
‫مورد بعدی تعداد آیتم‌های لیست است.

13
00:01:02,000 --> 00:01:12,000
‫بنابراین از همان کد استفاده میکنم، اما اینبار مقدار 5 را به 2 تغییر میدهم.

14
00:01:16,000 --> 00:01:22,000
‫اینبار نمی‌خوام نتایج را فیلتر کنم، بلکه می‌خواهم آنها را مرتب کنم.

15
00:01:22,000 --> 00:01:26,000
‫بنابراین همانطور که مشاهده می‌کنید، وقتی جلسات را براساس votes
‫مرتب میکنم، اولین جلسه به جای How To Be Awesome

16
00:01:26,000 --> 00:01:32,000
‫How To Program است. خب اجازه دهید یک تست برای آن بنویسیم.

17
00:01:32,000 --> 00:01:36,000
‫دوباره، به ساختار HTML نگاهی می‌اندازیم.

18
00:01:36,000 --> 00:01:42,000
‫در اینحالت مدل به sortorder بایند شده است

19
00:01:42,000 --> 00:01:48,000
‫و مقداری که می‌خواهم انتخاب کنم upVoteCount است.

20
00:01:48,000 --> 00:01:51,000
‫اکنون می‌خواهم بررسی کنم که آیا مقدار اولین h4 برابر با How To Program است.

21
00:01:51,000 --> 00:02:03,000
‫برای ساده‌سازی آن، این قسمت را کپی میکنم و متن آن را تغییر میدهم.

22
00:02:03,000 --> 00:02:10,000
‫اکنون به یک تست دیگر نیاز دارم. این تست مقداری سخت‌تر است.

23
00:02:10,000 --> 00:02:14,000
‫در برنامهٔ ما وقتی می‌خواهم به یک جلسه امتیاز بدهم، نیاز به لاگین دارم.

24
00:02:14,000 --> 00:02:19,000
‫بنابراین اگر بر روی upvote کلیک کنم به صفحه لاگین هدایت می‌شوم.

25
00:02:19,000 --> 00:02:27,000
‫خب، اگر با نام کاربری bob لاگین کنم، می‌توانم به یک جلسه امتیاز بدهم.

26
00:02:27,000 --> 00:02:32,000
‫بنابراین، می‌خواهم قابلیت امتیازدهی را تست کنم، اما در تست ما
‫برای امتیازدهی نیاز به لاگین داریم.

27
00:02:32,000 --> 00:02:41,000
‫بنابراین نوشتن این تست مستلزم چند مرحله دیگر است.

28
00:02:41,000 --> 00:02:45,000
‫با navigating کردن به صفحه لاگین شروع می‌کنیم

29
00:02:45,000 --> 00:02:51,000
‫بعد از آن نیاز است نام کاربری و کلمه عبور را وارد کرده و دکمه لاگین
‫را کلیک کنیم.

30
00:02:51,000 --> 00:02:58,000
‫برای وارد کردن یک مقدار درون تکست‌باکس، از تابع input استفاده میکنم.

31
00:02:58,000 --> 00:03:02,000
‫اما اکنون باید نگاهی به HTML آن بیندازیم.

32
00:03:02,000 --> 00:03:06,000
‫عنصر input که می‌خواهم استفاده کنم دقیقاً این یکی است.

33
00:03:06,000 --> 00:03:11,000
‫همانطور که مشاهده می‌کنید در اینجا مدل به user. userName بایند شده است.

34
00:03:11,000 --> 00:03:19,000
‫این کلیدی است که برای مقداردهی تکست‌باکس‌های داخل تست‌های end-to-end
‫به آن نیاز پیدا خواهیم کرد.

35
00:03:19,000 --> 00:03:25,000
‫سپس تابع enter را با نام کاربری به آن پاس میدهم.

36
00:03:25,000 --> 00:03:32,000
‫همین کار را باید برای کلمهٔ عبور نیز انجام دهیم. به کلیک بر روی دکمهٔ
‫لاگین هم نیاز خواهیم داشت.

37
00:03:32,000 --> 00:03:39,000
‫خب با مشاهده ساختار HTML آن، خواهیم دید که عنصر دکمه دارای کلاسی با نام
‫btn است.

38
00:03:39,000 --> 00:03:46,000
‫بنابراین، می‌توانیم با فراخوانی تابع element با آن دسترسی داشته باشیم
‫و بررسی کنیم که آیا دارای کلاسی با نام btn است.

39
00:03:46,000 --> 00:03:49,000
‫سپس تابع click را فراخوانی میکنم.

40
00:03:49,000 --> 00:03:55,000
‫با این کار بر روی دکمه کلیک شده و لاگین خواهیم کرد. اکنون اجازه دهید
‫ببینیم بعد از لاگین چه اتفاقی خواهد افتاد.

41
00:03:55,000 --> 00:04:02,000
‫ابتدا اجازه دهید خارج شوم و دوباره با نام کاربری bob وارد شوم
‫دقت داشته باشید که به صفحه Events خواهیم رفت.

42
00:04:02,000 --> 00:04:07,000
‫برای رفتن به صفحه Event Detail، باید بر روی event thumbnail کلیک کنیم.

43
00:04:07,000 --> 00:04:10,000
‫خب، باید مشابه اینکار را در تست‌های end-to-end انجام دهم.

44
00:04:10,000 --> 00:04:19,000
‫خب همانطور که از ساختار HTML این قسمت پیداست، این یک div
‫با یک کلاس well است.

45
00:04:29,000 --> 00:04:32,000
‫خب، اینکار مرا به صفحه مربوطه هدایت میکند.

46
00:04:32,000 --> 00:04:37,000
‫اکنون ممکن است تعجب کنید که چرا بعد از لاگین از browser. navigateTo
‫استفاده نمی‌کنم.

47
00:04:40,000 --> 00:04:45,000
‫زیرا از کوکی برای authentication در این برنامه استفاده نمی‌کنیم.

48
00:04:45,000 --> 00:04:50,000
‫این یک best practice نیست، اما از آنجائیکه browser. navigateTo باعث
‫ایجاد یک درخواست get می‌شود،

49
00:04:50,000 --> 00:04:55,000
‫لاگین ناپدید می‌شود. اکنون که در صفحه مربوط هستم باید نحوهٔ کلیک بر روی
‫vote را پیدا کنیم.

50
00:04:55,000 --> 00:05:00,000
‫خب، اجازه دهید به دایرکتیو upvote نگاهی بیندازیم و ببینیم
‫ساختار HTML آن به چه نحوی است.

51
00:05:00,000 --> 00:05:03,000
‫آیتمی که می‌خواهم بر روی آن کلیک کنم دقیقاً این div است.

52
00:05:03,000 --> 00:05:06,000
‫کلیک کردن بر روی این عنصر باعث فراخوانی تابع upvote
‫خواهد شد.

53
00:05:06,000 --> 00:05:11,000
‫بنابراین این div یک کلاس votingButton دارد و از آنجائیکه می‌خواهیم به اولین جلسه
‫امتیاز دهیم،

54
00:05:11,000 --> 00:05:17,000
‫می‌توانم اولین div صفحه که دارای کلاس votingButton است را دریافت کنم.

55
00:05:17,000 --> 00:05:21,000
‫سپس تابع click را برای آن فراخوانی میکنم. آخرین مورد ایجاد expectationی است

56
00:05:21,000 --> 00:05:25,000
‫که امتیاز 0 به 1 را بررسی خواهد کرد.

57
00:05:25,000 --> 00:05:28,000
‫اکنون باید نوع عنصر و مقدار متن آن را بدانیم.

58
00:05:28,000 --> 00:05:31,000
‫خب اجازه دهید به ویجت امتیازدهی برگردیم. در اینجا این

59
00:05:31,000 --> 00:05:35,000
‫div را خواهیم دید. خب، اکنون یک مشکل کوچک داریم.

60
00:05:35,000 --> 00:05:38,000
‫این div امکان دسترسی را به صورت آسان در اختیارمان قرار نمیدهد،

61
00:05:38,000 --> 00:05:42,000
‫برای سادگی کار یک کلاس ویژه برای این div در نظر میگیرم

62
00:05:42,000 --> 00:05:46,000
‫اکنون دسترسی به آن درون تست خیلی راحت است.

63
00:05:46,000 --> 00:05:59,000
‫اکنون کلاس موردنظر را داریم و می‌توانیم اولین div را دریافت کنیم. اجازه دهید تست
‫را اجرا کنیم.

64
00:05:59,000 --> 00:06:01,000
‫این آخرین سناریویی بود که میخواستم تست کنم.

65
00:06:01,000 --> 00:06:04,000
‫این بخش درک صحیحی از تست end-to-end در انگولار را در اختیارمان قرار داد.

66
00:06:04,000 --> 00:06:09,000
‫در این بخش با متدهای زیادی جهت دستکاری صفحه و انجام تست‌های
‫end-to-end آشنا شدیم.

