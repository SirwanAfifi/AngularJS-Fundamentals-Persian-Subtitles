1
00:00:00,500 --> 00:00:06,500
‫اجازه دهید نگاهی بر سرویس $cacheFactory بیندازیم.
‫به منظور توضیح این سرویس یک کنترلر با نام

2
00:00:06,500 --> 00:00:14,500
‫CacheSampleController ایجاد کرده ام، که کدی داخل آن نیست.
‫و همچنین یک صفحه با نام CacheSample. html

3
00:00:14,500 --> 00:00:21,500
‫به یک سرویس نیاز داریم بنابراین به جای ساخت فایل سرویس
‫به صورت inline درون app. js سرویس را تعریف می‌کنم

4
00:00:21,500 --> 00:00:29,500
‫خب، همانند دیگر سرویس‌ها اینجا یک سرویس ایجاد میکنم

5
00:00:29,500 --> 00:00:35,500
‫و نام آن را myCache می‌گذارم.

6
00:00:35,500 --> 00:00:42,500
‫اما توجه داشته باشید که $cacheFactory را در تابعی که
‫برای ایجاد این سرویس استفاده میکنیم به عنوان ورودی گرفته ایم.

7
00:00:42,500 --> 00:00:47,500
‫و در واقع برای ساخت سرویس متد $cacheFactory را فراخوانی می‌کنیم
‫و یک نام برای آن تعیین می‌کنیم که در اینجا myCache می‌باشد

8
00:00:47,500 --> 00:00:53,500
‫و همچنین مقدار capacity آن برابر با عدد سه است.

9
00:00:53,500 --> 00:01:01,500
‫خب عدد سه باعث می‌شود که کش شبیه به کش LUR عمل کند
‫بنابراین سایز کش محدود به

10
00:01:01,500 --> 00:01:08,500
‫سه آیتم می‌شود. در واقع مجبور نیستیم این مقدار را تعیین کنیم،
‫می تونیم آن رو حذف کنیم و بدون آن سرویس را ایجاد کنیم

11
00:01:08,500 --> 00:01:18,500
‫اما در این مثال می‌خواهیم آن را محدود به سه آیتم کنیم.

12
00:01:18,500 --> 00:01:29,500
‫بنابراین، داخل کنترلر CacheSampleController سه متد ایجاد می‌کنیم،

13
00:01:29,500 --> 00:01:36,500
‫یک متد addToCache ، یک متد readFromCache و یک متد getCacheStats.

14
00:01:36,500 --> 00:01:45,500
‫خب، همانطور که مشاهده می‌کنید متد addToCache دارای یک key
‫و یک value به عنوان ورودی است و با استفاده از متد put آن را به کش اضافه می‌کنیم.

15
00:01:45,500 --> 00:01:54,500
‫این عملکرد کش است. دارای تعدادی key و value است.
‫و متد readFromCache تنها یک key دارد.

16
00:01:54,500 --> 00:02:01,500
‫متد getCacheStats نیز myCache. info را برمیگرداند. اکنون خروجی این متد
‫را برایتان توضیح میدهم.

17
00:02:01,500 --> 00:02:09,500
‫خب، باید cache را به کنترلرم تزریق کنم، که در واقع سرویس myCache می‌باشد

18
00:02:09,500 --> 00:02:15,500
‫این کدهای HTML را نیز ایجاد قرار میدهم. خب، دقت داشته باشید که
‫دو فیلد ورودی را اینجا اضافه کرده ام،

19
00:02:15,500 --> 00:02:22,500
‫یکی برای کلید و دیگری برای مقدار، همچنین یک دکمه که وقتی بر
‫روی آن کلیک میشود متد addToCache را فراخوانی میکند

20
00:02:22,500 --> 00:02:30,500
‫همان متدی که در کنترلرمان ایجاد کردیم، در اینجا key و value را
‫به این متد پاس می‌دهیم.

21
00:02:30,500 --> 00:02:39,500
‫سپس، یک فیلد دیگر داریم که می‌توانیم key را وارد کنیم و در
‫پایین آن مقدار کش را برای آن کلید نمایش می‌دهیم

22
00:02:39,500 --> 00:02:46,500
‫خب وقتیکه key را جهت خواندن value تایپ می‌کنیم متد

23
00:02:46,500 --> 00:02:52,500
‫readFromCache صدا زده می‌شود و کلید را جهت نمایش مقدار پاس میدهد.

24
00:02:52,500 --> 00:02:57,500
‫اینها توسط انقیاد دوطرفه توکار انگولار انجام می‌شود.

25
00:02:57,500 --> 00:03:03,500
‫سپس خط بعدی Cache Stats است، که وضعیت کش را به ما نشان می‌دهد
‫که متد getInfo را

26
00:03:03,500 --> 00:03:09,500
‫فراخوانی میکند. خب، اجازه دهید خروجی را در مروگر ببینیم.

27
00:03:09,500 --> 00:03:19,500
‫خب اگر صفحه را ریفرش کنیم، خب اینها فیلدهای ما هستند. توجه داشته باشید که
‫وضعیت کش در اینجا نمایش داده شده است که اطلاعاتی در مورد

28
00:03:19,500 --> 00:03:27,500
‫کش را مانند ظرفیت آن که در اینجا 3 است را به ما نشان میدهد،
‫همچنین آی دی کش و سایز آن را نیز نشان میدهد.

29
00:03:27,500 --> 00:03:33,500
‫خب، اجازه دهید تعدادی آیتم را به آن اضافه کنیم. مثلاً رنگ‌های ‫مورد علاقه برای افراد را اضافه می‌کنیم مثلاً

30
00:03:33,500 --> 00:03:44,500
‫رنگ موردعلاقه جک آبی است. دقت داشته باشید که اکنون
‫سایز کش مان یک است. رنگ بعدی صورتی است.

31
00:03:44,500 --> 00:03:56,500
‫اکنون سایز به 2 تغییر پیدا کرد، رنگ بعدی سبز است و رنگ
‫بعدی نیز زرد می‌باشد.

32
00:03:56,500 --> 00:04:02,500
‫خب، دقت داشته باشید که وقتی چهارمی را وارد کردم عدد سایز
‫تغییر نکرد زیرا سایز آن سه است.

33
00:04:02,500 --> 00:04:10,500
‫خب، کدام آیتم ذخیره نشده است؟ Jane نیست!
‫وقتی Jane را تایپ میکنم مقدار آن اینجا نشان داده می‌شود

34
00:04:10,500 --> 00:04:18,500
‫خب Jane هم نیست

35
00:04:18,500 --> 00:04:24,500
‫همچنین John نیز نیست، Jill هم نیست. آیتمی که
‫ذخیره نشده Jack است

36
00:04:24,500 --> 00:04:30,500
‫که اولین آیتم بود و آخرین موردی بود که از کش خارج شد

37
00:04:30,500 --> 00:04:34,500
‫وقتی بیش از سه آیتم را وارد کردیم.

38
00:04:34,500 --> 00:04:41,500
‫خب این کار $cacheFactory است. شما از $cacheFactory جهت
‫تولید کش استفاده می‌کنید و ظرفیتی را برای

39
00:04:41,500 --> 00:04:46,500
‫آن در نظر می‌گیرید سپس توسط متدهای put و get به آن آیتم هایی
‫را اضافه می‌کنید.

